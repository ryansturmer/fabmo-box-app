<html>
<div id="output">
<script src="js/lib/jquery.min.js"></script>
<script src="js/lib/dashboard.js"></script>
<script src="js/box.js"></script>

<body>
<canvas id="canvas" width="1000" height="1000" style="border: 1px solid black;"></canvas>

<script type="text/javascript">
	var materialThickness = 0.75;
	var boxLength = 20.0;
	var boxWidth = 4.0;
	var boxTabs = 4;
	var bitDiameter = 0.25;
	var feedRate = 60.0;
	var plungeRate = 15.0;
	var safeZ = 0.5;

	scale = 1.0;
	//edge = makeBoxEdge(400.0, 2.0, GENDER_MALE, 50.0, 25);
	side = makeBoxSide(scale*boxLength, scale*boxWidth, boxTabs, GENDER_MALE, scale*materialThickness, scale*bitDiameter);
	side.translate(-side.bounds().xmin, -side.bounds().ymin);
	codeList = generateGCodeList(side,-materialThickness - 0.015, bitDiameter/2.0, feedRate, plungeRate, safeZ);
	fabmoDashboard.submitJob(codeList.join('\n'), {
								filename : 'box.nc',
                      			name : 'Box Test'});

	//draw(edge);
	draw(side);
	//$('#output').html(JSON.stringify(edge.pretty()));
	function draw(turtle) {
      var canvas = documnet.getElementById('canvas');
      var context = canvas.getContext('2d');
      context.scale(1,1);
      context.beginPath();
      context.moveTo(turtle.history[0].x+500, 500-turtle.history[0].y);
      for(i in turtle.history) {
      	p = turtle.history[i];
      	console.log(p)
      	context.lineTo(p.x+500, 500-p.y)
      }
      context.stroke();
	}
</script>

</html>